{"version":3,"file":"main.js","sources":["webpack://happy-birthday/./script/main.js"],"sourcesContent":["let audioUrl = \"\";\nlet audio = null;\nlet isPlaying = false;\n\n// Import the data to customize and insert them into page\nconst fetchData = () => {\n  fetch(\"wishes.json\")\n    .then((data) => data.json())\n    .then((data) => {\n      dataArr = Object.keys(data);\n      dataArr.map((customData) => {\n        if (data[customData] !== \"\") {\n          if (customData === \"imagePath\") {\n            document\n              .querySelector(`[data-node-name*=\"${customData}\"]`)\n              .setAttribute(\"src\", data[customData]);\n          } else if (customData === \"fonts\") {\n            data[customData].forEach((font) => {\n              const link = document.createElement(\"link\");\n              link.rel = \"stylesheet\";\n              link.href = font.path;\n              document.head.appendChild(link);\n              document.body.style.fontFamily = font.name;\n            });\n          } else if (customData === \"music\") {\n            audioUrl = data[customData];\n            audio = new Audio(audioUrl);\n            audio.preload = \"auto\";\n          } else {\n            document.querySelector(\n              `[data-node-name*=\"${customData}\"]`\n            ).innerText = data[customData];\n          }\n        }\n\n        // Check if the iteration is over\n        // Run amimation if so\n        if (dataArr.length === dataArr.indexOf(customData) + 1) {\n          document\n            .querySelector(\"#startButton\")\n            .addEventListener(\"click\", () => {\n              document.querySelector(\".startSign\").style.display = \"none\";\n              animationTimeline();\n            });\n          // animationTimeline()\n        }\n      });\n    });\n};\n\n// Animation Timeline\nconst animationTimeline = () => {\n  // Spit chars that needs to be animated individually\n  const textBoxChars = document.getElementsByClassName(\"hbd-chatbox\")[0];\n  const hbd = document.getElementsByClassName(\"wish-hbd\")[0];\n  \n  // Split credits text into words for word-by-word animation - moved to end\n\n  textBoxChars.innerHTML = `<span>${textBoxChars.innerHTML\n    .split(\"\")\n    .join(\"</span><span>\")}</span`;\n\n  hbd.innerHTML = `<span>${hbd.innerHTML\n    .split(\"\")\n    .join(\"</span><span>\")}</span`;\n\n  const ideaTextTrans = {\n    opacity: 0,\n    y: -20,\n    rotationX: 5,\n    skewX: \"15deg\",\n  };\n\n  const ideaTextTransLeave = {\n    opacity: 0,\n    y: 20,\n    rotationY: 5,\n    skewX: \"-15deg\",\n  };\n\n  const tl = new TimelineMax();\n\n  tl.to(\".container\", 0.1, {\n    visibility: \"visible\",\n  })\n    .from(\".one\", 1.5, {\n      opacity: 0,\n      y: 10,\n    })\n    .from(\".two\", 1.0, {\n      opacity: 0,\n      y: 10,\n    })\n    .to(\n      \".one\",\n      1.2,\n      {\n        opacity: 0,\n        y: 10,\n      },\n      \"+=4\"\n    )\n    .to(\n      \".two\",\n      1.2,\n      {\n        opacity: 0,\n        y: 10,\n      },\n      \"-=1.5\"\n    )\n    .from(\".three\", 1.2, {\n      opacity: 0,\n      y: 10,\n      // scale: 0.7\n    })\n    .to(\n      \".three\",\n      1.2,\n      {\n        opacity: 0,\n        y: 10,\n      },\n      \"+=3.5\"\n    )\n    .from(\".four\", 1.2, {\n      scale: 0.2,\n      opacity: 0,\n    })\n    .from(\".fake-btn\", 0.8, {\n      scale: 0.2,\n      opacity: 0,\n    })\n    .staggerTo(\n      \".hbd-chatbox span\",\n      0.8,\n      {\n        visibility: \"visible\",\n      },\n      0.08\n    )\n    .to(\".fake-btn\", 0.3, {\n      backgroundColor: \"#8FE3B6\",\n    })\n    .to(\n      \".four\",\n      1.0,\n      {\n        scale: 0.2,\n        opacity: 0,\n        y: -150,\n      },\n      \"+=1.5\"\n    )\n    .from(\".idea-1\", 1.2, ideaTextTrans)\n    .to(\".idea-1\", 1.2, ideaTextTransLeave, \"+=2.5\")\n    .from(\".idea-2\", 1.2, ideaTextTrans)\n    .to(\".idea-2\", 1.2, ideaTextTransLeave, \"+=2.5\")\n    .from(\".idea-3\", 1.2, ideaTextTrans)\n    .to(\".idea-3 strong\", 0.8, {\n      scale: 1.2,\n      x: 10,\n      backgroundColor: \"rgb(21, 161, 237)\",\n      color: \"#fff\",\n    })\n    .to(\".idea-3\", 1.2, ideaTextTransLeave, \"+=2.5\")\n    .from(\".idea-4\", 1.2, ideaTextTrans)\n    .to(\".idea-4\", 1.2, ideaTextTransLeave, \"+=2.5\")\n    .from(\n      \".idea-5\",\n      1.5,\n      {\n        rotationX: 15,\n        rotationZ: -10,\n        skewY: \"-5deg\",\n        y: 50,\n        z: 10,\n        opacity: 0,\n      },\n      \"+=1\"\n    )\n    .to(\n      \".idea-5 .smiley\",\n      1.0,\n      {\n        rotation: 90,\n        x: 8,\n      },\n      \"+=0.8\"\n    )\n    .to(\n      \".idea-5\",\n      1.2,\n      {\n        scale: 0.2,\n        opacity: 0,\n      },\n      \"+=3\"\n    )\n    .staggerFrom(\n      \".idea-6 span\",\n      1.5,\n      {\n        scale: 3,\n        opacity: 0,\n        rotation: 15,\n        ease: Expo.easeOut,\n      },\n      0.4\n    )\n    .staggerTo(\n      \".idea-6 span\",\n      1.5,\n      {\n        scale: 3,\n        opacity: 0,\n        rotation: -15,\n        ease: Expo.easeOut,\n      },\n      0.4,\n      \"+=2\"\n    )\n    .staggerFromTo(\n      \".baloons img\",\n      4.0,\n      {\n        opacity: 0.9,\n        y: 1400,\n      },\n      {\n        opacity: 1,\n        y: -1000,\n      },\n      0.3\n    )\n    .from(\n      \".panda-dp\",\n      1.2,\n      {\n        scale: 3.5,\n        opacity: 0,\n        x: 25,\n        y: -25,\n        rotationZ: -45,\n      },\n      \"-=3\"\n    )\n    .from(\".hat\", 1.0, {\n      x: -100,\n      y: 350,\n      rotation: -180,\n      opacity: 0,\n    })\n    .staggerFrom(\n      \".wish-hbd span\",\n      1.2,\n      {\n        opacity: 0,\n        y: -50,\n        // scale: 0.3,\n        rotation: 150,\n        skewX: \"30deg\",\n        ease: Elastic.easeOut.config(1, 0.5),\n      },\n      0.15\n    )\n    .staggerFromTo(\n      \".wish-hbd span\",\n      1.2,\n      {\n        scale: 1.4,\n        rotationY: 150,\n      },\n      {\n        scale: 1,\n        rotationY: 0,\n        color: \"#ff69b4\",\n        ease: Expo.easeOut,\n      },\n      0.15,\n      \"party\"\n    )\n    .from(\n      \".wish h5\",\n      1.0,\n      {\n        opacity: 0,\n        y: 10,\n        skewX: \"-15deg\",\n      },\n      \"party\"\n    )\n    .staggerTo(\n      \".eight svg\",\n      2.5,\n      {\n        visibility: \"visible\",\n        opacity: 0,\n        scale: 80,\n        repeat: 3,\n        repeatDelay: 2.5,\n      },\n      0.5\n    )\n    .to(\".six\", 1.0, {\n      opacity: 0,\n      y: 30,\n      zIndex: \"-1\",\n    })\n    .staggerFrom(\".nine p\", 1.8, ideaTextTrans, 2.0)\n    .to(\n      \".last-smile\",\n      1.0,\n      {\n        rotation: 90,\n      },\n      \"+=2\"\n    )\n    .to(\".nine\", 1.0, {\n      opacity: 0,\n      y: -30,\n    }, \"+=3\")\n    .to(\".ten\", 0.1, {\n      visibility: \"visible\"\n    })\n    .from(\".ten\", 1.5, {\n      opacity: 0,\n      y: 50,\n    })\n    .from(\".credits-title\", 1.5, {\n      opacity: 0,\n      y: 20,\n      scale: 0.8,\n    }, \"-=0.5\")\n    .call(() => {\n      // Split credits text into words for word-by-word animation\n      const creditsText = document.getElementsByClassName(\"credits-text\")[0];\n      if (creditsText && creditsText.innerHTML.trim()) {\n        const text = creditsText.innerHTML.trim();\n        console.log(\"Credits text found:\", text.substring(0, 50) + \"...\");\n        creditsText.innerHTML = `<span>${text\n          .split(\" \")\n          .join(\"</span> <span>\")}</span>`;\n        console.log(\"Credits spans created:\", creditsText.querySelectorAll(\"span\").length);\n      } else {\n        console.log(\"Credits text not found or empty\");\n      }\n    })\n    .to({}, 0.2, {}) // Small delay to ensure spans are ready\n    .staggerFrom(\n      \".credits-text span\",\n      0.6,\n      {\n        opacity: 0,\n        y: 20,\n        rotationX: 90,\n        transformOrigin: \"50% 50% -20px\",\n        ease: Back.easeOut.config(1.7),\n      },\n      0.25\n    );\n\n  // tl.seek(\"currentStep\");\n  // tl.timeScale(2);\n\n  // Restart Animation on click\n  const replayBtn = document.getElementById(\"replay\");\n  replayBtn.addEventListener(\"click\", () => {\n    tl.restart();\n  });\n};\n\n// Run fetch and animation in sequence\nfetchData();\n\nconst playPauseButton = document.getElementById(\"playPauseButton\");\n\ndocument.getElementById(\"startButton\").addEventListener(\"click\", () => {\n  if (audio) {\n    togglePlay(true);\n  }\n});\n\nplayPauseButton.addEventListener(\"click\", () => {\n  if (audio) {\n    togglePlay(!isPlaying);\n  }\n});\n\nfunction togglePlay(play) {\n  if (!audio) return;\n\n  isPlaying = play;\n  play ? audio.play() : audio.pause();\n  playPauseButton.classList.toggle(\"playing\", play);\n}\n"],"names":["audioUrl","audio","isPlaying","animationTimeline","textBoxChars","document","getElementsByClassName","hbd","innerHTML","split","join","ideaTextTrans","opacity","y","rotationX","skewX","ideaTextTransLeave","rotationY","tl","TimelineMax","to","visibility","from","scale","staggerTo","backgroundColor","x","color","rotationZ","skewY","z","rotation","staggerFrom","ease","Expo","easeOut","staggerFromTo","Elastic","config","repeat","repeatDelay","zIndex","call","creditsText","trim","text","console","log","substring","querySelectorAll","length","transformOrigin","Back","replayBtn","getElementById","addEventListener","restart","fetch","then","data","json","dataArr","Object","keys","map","customData","querySelector","setAttribute","forEach","font","link","createElement","rel","href","path","head","appendChild","body","style","fontFamily","name","Audio","preload","innerText","indexOf","display","playPauseButton","togglePlay","play","pause","classList","toggle"],"mappings":"kCAAA,IAAIA,EAAW,GACXC,EAAQ,KACRC,EAAY,GAiDVC,EAAoB,KAExB,IAAMC,EAAeC,SAASC,sBAAsB,CAAC,cAAc,CAAC,EAAE,CAChEC,EAAMF,SAASC,sBAAsB,CAAC,WAAW,CAAC,EAAE,AAI1DF,CAAAA,EAAaI,SAAS,CAAG,CAAC,MAAM,EAAEJ,EAAaI,SAAS,CACrDC,KAAK,CAAC,IACNC,IAAI,CAAC,iBAAiB,MAAM,CAAC,CAEhCH,EAAIC,SAAS,CAAG,CAAC,MAAM,EAAED,EAAIC,SAAS,CACnCC,KAAK,CAAC,IACNC,IAAI,CAAC,iBAAiB,MAAM,CAAC,CAEhC,IAAMC,EAAgB,CACpBC,QAAS,EACTC,EAAG,IACHC,UAAW,EACXC,MAAO,OACT,EAEMC,EAAqB,CACzBJ,QAAS,EACTC,EAAG,GACHI,UAAW,EACXF,MAAO,QACT,EAEMG,EAAK,IAAIC,YAEfD,EAAGE,EAAE,CAAC,aAAc,GAAK,CACvBC,WAAY,SACd,GACGC,IAAI,CAAC,OAAQ,IAAK,CACjBV,QAAS,EACTC,EAAG,EACL,GACCS,IAAI,CAAC,OAAQ,EAAK,CACjBV,QAAS,EACTC,EAAG,EACL,GACCO,EAAE,CACD,OACA,IACA,CACER,QAAS,EACTC,EAAG,EACL,EACA,OAEDO,EAAE,CACD,OACA,IACA,CACER,QAAS,EACTC,EAAG,EACL,EACA,SAEDS,IAAI,CAAC,SAAU,IAAK,CACnBV,QAAS,EACTC,EAAG,EAEL,GACCO,EAAE,CACD,SACA,IACA,CACER,QAAS,EACTC,EAAG,EACL,EACA,SAEDS,IAAI,CAAC,QAAS,IAAK,CAClBC,MAAO,GACPX,QAAS,CACX,GACCU,IAAI,CAAC,YAAa,GAAK,CACtBC,MAAO,GACPX,QAAS,CACX,GACCY,SAAS,CACR,oBACA,GACA,CACEH,WAAY,SACd,EACA,KAEDD,EAAE,CAAC,YAAa,GAAK,CACpBK,gBAAiB,SACnB,GACCL,EAAE,CACD,QACA,EACA,CACEG,MAAO,GACPX,QAAS,EACTC,EAAG,IACL,EACA,SAEDS,IAAI,CAAC,UAAW,IAAKX,GACrBS,EAAE,CAAC,UAAW,IAAKJ,EAAoB,SACvCM,IAAI,CAAC,UAAW,IAAKX,GACrBS,EAAE,CAAC,UAAW,IAAKJ,EAAoB,SACvCM,IAAI,CAAC,UAAW,IAAKX,GACrBS,EAAE,CAAC,iBAAkB,GAAK,CACzBG,MAAO,IACPG,EAAG,GACHD,gBAAiB,oBACjBE,MAAO,MACT,GACCP,EAAE,CAAC,UAAW,IAAKJ,EAAoB,SACvCM,IAAI,CAAC,UAAW,IAAKX,GACrBS,EAAE,CAAC,UAAW,IAAKJ,EAAoB,SACvCM,IAAI,CACH,UACA,IACA,CACER,UAAW,GACXc,UAAW,IACXC,MAAO,QACPhB,EAAG,GACHiB,EAAG,GACHlB,QAAS,CACX,EACA,OAEDQ,EAAE,CACD,kBACA,EACA,CACEW,SAAU,GACVL,EAAG,CACL,EACA,SAEDN,EAAE,CACD,UACA,IACA,CACEG,MAAO,GACPX,QAAS,CACX,EACA,OAEDoB,WAAW,CACV,eACA,IACA,CACET,MAAO,EACPX,QAAS,EACTmB,SAAU,GACVE,KAAMC,KAAKC,OAAO,AACpB,EACA,IAEDX,SAAS,CACR,eACA,IACA,CACED,MAAO,EACPX,QAAS,EACTmB,SAAU,IACVE,KAAMC,KAAKC,OAAO,AACpB,EACA,GACA,OAEDC,aAAa,CACZ,eACA,EACA,CACExB,QAAS,GACTC,EAAG,IACL,EACA,CACED,QAAS,EACTC,EAAG,IACL,EACA,IAEDS,IAAI,CACH,YACA,IACA,CACEC,MAAO,IACPX,QAAS,EACTc,EAAG,GACHb,EAAG,IACHe,UAAW,GACb,EACA,OAEDN,IAAI,CAAC,OAAQ,EAAK,CACjBI,EAAG,KACHb,EAAG,IACHkB,SAAU,KACVnB,QAAS,CACX,GACCoB,WAAW,CACV,iBACA,IACA,CACEpB,QAAS,EACTC,EAAG,IAEHkB,SAAU,IACVhB,MAAO,QACPkB,KAAMI,QAAQF,OAAO,CAACG,MAAM,CAAC,EAAG,GAClC,EACA,KAEDF,aAAa,CACZ,iBACA,IACA,CACEb,MAAO,IACPN,UAAW,GACb,EACA,CACEM,MAAO,EACPN,UAAW,EACXU,MAAO,UACPM,KAAMC,KAAKC,OAAO,AACpB,EACA,IACA,SAEDb,IAAI,CACH,WACA,EACA,CACEV,QAAS,EACTC,EAAG,GACHE,MAAO,QACT,EACA,SAEDS,SAAS,CACR,aACA,IACA,CACEH,WAAY,UACZT,QAAS,EACTW,MAAO,GACPgB,OAAQ,EACRC,YAAa,GACf,EACA,IAEDpB,EAAE,CAAC,OAAQ,EAAK,CACfR,QAAS,EACTC,EAAG,GACH4B,OAAQ,IACV,GACCT,WAAW,CAAC,UAAW,IAAKrB,EAAe,GAC3CS,EAAE,CACD,cACA,EACA,CACEW,SAAU,EACZ,EACA,OAEDX,EAAE,CAAC,QAAS,EAAK,CAChBR,QAAS,EACTC,EAAG,GACL,EAAG,OACFO,EAAE,CAAC,OAAQ,GAAK,CACfC,WAAY,SACd,GACCC,IAAI,CAAC,OAAQ,IAAK,CACjBV,QAAS,EACTC,EAAG,EACL,GACCS,IAAI,CAAC,iBAAkB,IAAK,CAC3BV,QAAS,EACTC,EAAG,GACHU,MAAO,EACT,EAAG,SACFmB,IAAI,CAAC,KAEJ,IAAMC,EAActC,SAASC,sBAAsB,CAAC,eAAe,CAAC,EAAE,CACtE,GAAIqC,GAAeA,EAAYnC,SAAS,CAACoC,IAAI,GAAI,CAC/C,IAAMC,EAAOF,EAAYnC,SAAS,CAACoC,IAAI,GACvCE,QAAQC,GAAG,CAAC,sBAAuBF,EAAKG,SAAS,CAAC,EAAG,IAAM,OAC3DL,EAAYnC,SAAS,CAAG,CAAC,MAAM,EAAEqC,EAC9BpC,KAAK,CAAC,KACNC,IAAI,CAAC,kBAAkB,OAAO,CAAC,CAClCoC,QAAQC,GAAG,CAAC,yBAA0BJ,EAAYM,gBAAgB,CAAC,QAAQC,MAAM,CACnF,MACEJ,QAAQC,GAAG,CAAC,kCAEhB,GACC3B,EAAE,CAAC,CAAC,EAAG,GAAK,CAAC,GACbY,WAAW,CACV,qBACA,GACA,CACEpB,QAAS,EACTC,EAAG,GACHC,UAAW,GACXqC,gBAAiB,gBACjBlB,KAAMmB,KAAKjB,OAAO,CAACG,MAAM,CAAC,IAC5B,EACA,KAQJe,AADkBhD,SAASiD,cAAc,CAAC,UAChCC,gBAAgB,CAAC,QAAS,KAClCrC,EAAGsC,OAAO,EACZ,EACF,EA5WEC,MAAM,eACHC,IAAI,CAAC,AAACC,GAASA,EAAKC,IAAI,IACxBF,IAAI,CAAC,AAACC,IAELE,AADAA,CAAAA,QAAUC,OAAOC,IAAI,CAACJ,EAAI,EAClBK,GAAG,CAAC,AAACC,IACc,KAArBN,CAAI,CAACM,EAAW,GACdA,AAAe,cAAfA,EACF5D,SACG6D,aAAa,CAAC,CAAC,kBAAkB,EAAED,EAAW,EAAE,CAAC,EACjDE,YAAY,CAAC,MAAOR,CAAI,CAACM,EAAW,EAC9BA,AAAe,UAAfA,EACTN,CAAI,CAACM,EAAW,CAACG,OAAO,CAAC,AAACC,IACxB,IAAMC,EAAOjE,SAASkE,aAAa,CAAC,OACpCD,CAAAA,EAAKE,GAAG,CAAG,aACXF,EAAKG,IAAI,CAAGJ,EAAKK,IAAI,CACrBrE,SAASsE,IAAI,CAACC,WAAW,CAACN,GAC1BjE,SAASwE,IAAI,CAACC,KAAK,CAACC,UAAU,CAAGV,EAAKW,IAAI,AAC5C,GACSf,AAAe,UAAfA,GACTjE,EAAW2D,CAAI,CAACM,EAAW,CAE3BhE,AADAA,CAAAA,EAAQ,IAAIgF,MAAMjF,EAAQ,EACpBkF,OAAO,CAAG,QAEhB7E,SAAS6D,aAAa,CACpB,CAAC,kBAAkB,EAAED,EAAW,EAAE,CAAC,EACnCkB,SAAS,CAAGxB,CAAI,CAACM,EAAW,EAM9BJ,QAAQX,MAAM,GAAKW,QAAQuB,OAAO,CAACnB,GAAc,GACnD5D,SACG6D,aAAa,CAAC,gBACdX,gBAAgB,CAAC,QAAS,KACzBlD,SAAS6D,aAAa,CAAC,cAAcY,KAAK,CAACO,OAAO,CAAG,OACrDlF,GACF,EAGN,EACF,GAwUJ,IAAMmF,EAAkBjF,SAASiD,cAAc,CAAC,mBAchD,SAASiC,EAAWC,CAAI,EACjBvF,IAELC,EAAYsF,EACZA,EAAOvF,EAAMuF,IAAI,GAAKvF,EAAMwF,KAAK,GACjCH,EAAgBI,SAAS,CAACC,MAAM,CAAC,UAAWH,GAC9C,CAlBAnF,SAASiD,cAAc,CAAC,eAAeC,gBAAgB,CAAC,QAAS,KAC3DtD,GACFsF,EAAW,GAEf,GAEAD,EAAgB/B,gBAAgB,CAAC,QAAS,KACpCtD,GACFsF,EAAW,CAACrF,EAEhB,E"}